<!DOCTYPE html>
<html lang="ko">
<head>
    <link rel="stylesheet" href="reset.css">
    <meta charset="UTF-8">
    <title>Title</title>
</head>
<body>
<script>
    var resolveAfter2Seconds = function() {
        return new Promise(resolve => {
            setTimeout(function() {
                resolve(20);
            }, 2000);
        });
    };

    var resolveAfter1Second = function() {
        return new Promise(resolve => {
            setTimeout(function() {
                resolve(10);
            }, 1000);
        });
    };

    var sequentialStart = async function () {
        console.log('==SEQUENTIAL START==');

        // If the value of the expression following the await operator is not a Promise, it's converted to a resolved Promise.
        const slow = await resolveAfter2Seconds();
        console.log(slow);

        const fast = await resolveAfter1Second();
        console.log(fast);
    };

    var concurrentStart = async function () {
        console.log('==CONCURRENT START with await==');
        const slow = resolveAfter2Seconds(); // starts timer immediately
        const fast = resolveAfter1Second();

        console.log(await slow);
        console.log(await fast); // waits for slow to finish, even though fast is already done!
    };

    var stillConcurrent = function () {
        console.log('==CONCURRENT START with Promise.all==');
        Promise.all([resolveAfter2Seconds(), resolveAfter1Second()]).then((messages) => {
            console.log(messages[0]); // slow
            console.log(messages[1]); // fast
        });
    };

    var parallel = function () {
        console.log('==PARALLEL with Promise.then==');
        resolveAfter2Seconds().then((message) => console.log(message));
        console.log("call");
        resolveAfter1Second().then((message) => console.log(message));
    };

    stillConcurrent();
</script>
</body>
</html>
